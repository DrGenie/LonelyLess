<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LonelyLessAustralia Decision Aid Tool</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2canvas CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <header>
        <h1>LonelyLessAustralia Decision Aid Tool</h1>
    </header>

    <section id="instructions">
        <h2>How to Use This Tool</h2>
        <p>Welcome to LonelyLessAustralia! This tool is designed to help you assess the likelihood of program uptake aimed at reducing loneliness among older adults in Australia. Follow the steps below to get your predicted probability of program uptake:</p>
        <ol>
            <li>Select your preferences from the drop-down menus provided.</li>
            <li>Click the "Calculate Probability" button to see your results.</li>
            <li>Review the predicted probability, your selected program package, and the cost-benefit analysis.</li>
            <li>Download your selected program package and Uptake Probability chart for future reference.</li>
            <li>Use the buttons below to view detailed analyses by loneliness category and WTP.</li>
        </ol>
        <p>These support programs are essential in fostering community engagement and improving the well-being of our older adult population.</p>
    </section>

    <section id="form-section">
        <form id="decisionForm">
            <h2>Select Program Attributes</h2>
            
            <div class="form-group">
                <label for="type_comm">Community Engagement:</label>
                <select id="type_comm">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="type_psych">Psychological Counselling:</label>
                <select id="type_psych">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="type_vr">Virtual Reality:</label>
                <select id="type_vr">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="mode_virtual">Program Mode - Virtual:</label>
                <select id="mode_virtual">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="mode_hybrid">Program Mode - Hybrid:</label>
                <select id="mode_hybrid">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="freq_weekly">Frequency - Weekly:</label>
                <select id="freq_weekly">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="freq_monthly">Frequency - Monthly:</label>
                <select id="freq_monthly">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dur_2hrs">Duration - 2 Hours:</label>
                <select id="dur_2hrs">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dur_4hrs">Duration - 4 Hours:</label>
                <select id="dur_4hrs">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dist_local">Local Area Accessibility:</label>
                <select id="dist_local">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dist_signif">Wider Community Accessibility:</label>
                <select id="dist_signif">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cost_cont">Cost Continuum:</label>
                <select id="cost_cont">
                    <option value="1">Standard</option>
                    <option value="1.2">High</option>
                    <option value="0.8">Low</option>
                </select>
            </div>

            <div class="form-group">
                <label for="state_select">Select State:</label>
                <select id="state_select">
                    <option value="">-- Select State --</option>
                    <option value="NSW">New South Wales</option>
                    <option value="VIC">Victoria</option>
                    <option value="QLD">Queensland</option>
                    <option value="WA">Western Australia</option>
                    <option value="SA">South Australia</option>
                    <option value="TAS">Tasmania</option>
                    <option value="ACT">Australian Capital Territory</option>
                    <option value="NT">Northern Territory</option>
                </select>
            </div>

            <div class="form-group">
                <label for="adjust_costs">Adjust Costs for Living Expenses:</label>
                <select id="adjust_costs">
                    <option value="no">No</option>
                    <option value="yes">Yes</option>
                </select>
            </div>

            <button type="button" onclick="calculateProbability()">Calculate Probability</button>
        </form>
    </section>

    <section id="results-section">
        <h2>Results</h2>
        <p><strong>Predicted Uptake Probability:</strong> <span id="probability">--</span></p>
        <div class="chart-container">
            <canvas id="probabilityChart"></canvas>
        </div>

        <h3>Selected Program Package:</h3>
        <ul id="packageList">
            <!-- Selected attributes will be listed here -->
        </ul>
        <button id="downloadPackageBtn" onclick="downloadPackage()" style="display:none;">Download Program Package</button>
        <button id="downloadChartBtn" onclick="downloadChart()" style="display:none;">Download Uptake Probability Chart</button>
        <button id="downloadCBAPDFBtn" onclick="downloadCBAPDF()" style="display:none;">Download Enhanced CBA Report (PDF)</button>

        <div id="costInformation">
            <h3>Cost Breakdown:</h3>
            <ul id="costList">
                <!-- Cost components will be listed here -->
            </ul>
            <p><strong>Grand Total:</strong> $<span id="totalCost">--</span> AUD</p>
        </div>

        <div id="benefits">
            <h3>Benefit Analysis:</h3>
            <p><strong>Total Estimated Benefits:</strong> <span id="totalBenefits">--</span> AUD</p>
        </div>

        <div id="cba">
            <h3>Cost-Benefit Analysis:</h3>
            <p><strong>Net Benefit:</strong> <span id="netBenefit">--</span> AUD</p>
            <p><strong>Benefit-Cost Ratio:</strong> <span id="bcr">--</span></p>
        </div>

        <div class="chart-container">
            <canvas id="cbaChart"></canvas>
        </div>
    </section>

    <section id="interpretations">
        <!-- Brief interpretations based on probability will appear here -->
    </section>

    <section id="actions">
        <button onclick="openCategoryResults()">View Results by Loneliness Categories</button>
        <button onclick="openWTP()">Open WTP Report</button>
    </section>

    <section class="feedback-section">
        <h2>Provide Your Feedback</h2>
        <form id="feedbackForm">
            <textarea id="feedback" placeholder="Enter your feedback here..."></textarea>
            <br>
            <button type="submit">Submit Feedback</button>
        </form>
    </section>

    <!-- Include the updated script.js -->
    <script src="script.js"></script>
</body>
</html>
